{"version":3,"sources":["components/Modal/Modal.module.css","components/Button/Button.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/ImageGallery/ImageGallery.module.css","components/Loader/Loader.module.css","components/App/App.module.css","components/Searchbar/Searchbar.jsx","API/PixabayFetch.jsx","components/Loader/Loader.jsx","components/Modal/Modal.jsx","components/Button/Button.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/App/App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","searchQuery","reset","setState","onSubmitForm","e","preventDefault","trim","props","onSubmit","toast","error","onChangeInput","currentTarget","value","toLowerCase","this","className","s","SearchForm","type","button","label","input","autoFocus","autoComplete","placeholder","onChange","Component","fetchGallery","page","fetch","then","response","ok","json","Promise","reject","Error","Preloader","loader","color","height","width","modalRoot","document","querySelector","Modal","handleKeyDown","code","toggleModal","handleBackdropClick","target","window","addEventListener","removeEventListener","image","src","alt","createPortal","overlay","onClick","modal","Button","center","ImageGalleryItem","webformatURL","largeImageURL","tags","index","imageClickHandler","item","Status","ImageGallery","gallery","showModal","modalImage","status","scrollToBottom","scrollTo","top","documentElement","scrollHeight","behavior","handleLoadMore","updatingGallery","nextSearch","prevState","hits","length","catch","message","handlerClickEsc","key","show","openModal","prevProps","prevSearch","map","App","handleChange","app","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.0993aca4.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__3xRkm\",\"modal\":\"Modal_modal__1KjqW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__3Jnrl\",\"center\":\"Button_center__1IRrf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"ImageGalleryItem_item__3nuki\",\"image\":\"ImageGalleryItem_image__1g3OG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__Zi84P\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__W12h3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__2kr-N\"};","import React, { Component } from 'react';\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n  \r\nimport s from './Searchbar.module.css';\r\n\r\nexport default class Searchbar extends Component {\r\n\r\n  static propTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n  };\r\n\r\n  state = {\r\n    searchQuery: '',\r\n  } \r\n\r\n  reset = () => {\r\n    this.setState({ searchQuery: '' });\r\n  };\r\n  \r\n\r\n  onSubmitForm = e => {\r\n    const { searchQuery } = this.state;\r\n\r\n    e.preventDefault();\r\n    \r\n    if (searchQuery.trim() === '') {\r\n      toast.error('Enter search word');\r\n      return;\r\n    }\r\n\r\n    this.props.onSubmit(searchQuery);\r\n\r\n    this.reset();\r\n  };\r\n\r\n  onChangeInput = e => {\r\n    this.setState({ searchQuery: e.currentTarget.value.toLowerCase() });\r\n  };\r\n\r\n  render() {\r\n    const { searchQuery } = this.state;\r\n\r\n    return (\r\n      \r\n      <header>\r\n        <div className={s.Searchbar}>\r\n         \r\n        <form  onSubmit={this.onSubmitForm} className={s.SearchForm}>\r\n          <button type=\"submit\" className={s.button}>\r\n            <span className={s.label}>Search</span>\r\n          </button>\r\n          \r\n          <input\r\n            className={s.input}\r\n            type=\"text\"\r\n              autoFocus\r\n              autoComplete=\"off\"\r\n            placeholder=\"Search images and photos\"\r\n            value={searchQuery}\r\n            onChange={this.onChangeInput}\r\n          />\r\n          </form>\r\n          </div>\r\n      </header>      \r\n    );\r\n  }\r\n};\r\n","export default function fetchGallery(searchQuery, page) {\r\n  return fetch(\r\n    `https://pixabay.com/api/?q=${searchQuery}&page=${page}&key=19295709-d5276be665a4131ac0929716c&image_type=photo&orientation=horizontal&per_page=12`,\r\n  ).then(response => {\r\n    if (response.ok) {\r\n      return response.json();\r\n      }\r\n      \r\n      return Promise.reject(new Error(`${searchQuery} not found. `));\r\n  });\r\n}\r\n","import { Component } from 'react';\r\nimport Loader from 'react-loader-spinner';\r\nimport s from './Loader.module.css';\r\n\r\n\r\nexport default class Preloader extends Component {\r\n  \r\n  render() {\r\n    return (\r\n      <div>\r\n      <Loader className={s.loader}\r\n       type='Circles'\r\n        color='#3f51b5'\r\n        height={150}\r\n        width={150}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport s from \"./Modal.module.css\";\r\n\r\n\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nexport default class Modal extends Component {\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  handleKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n      this.props.toggleModal();\r\n    }\r\n  };\r\n\r\n  handleBackdropClick = e => {\r\n    if (e.currentTarget === e.target) {\r\n      this.props.toggleModal();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { src, alt } = this.props.image;\r\n    return createPortal(\r\n        <div className={s.overlay}  onClick={this.handleBackdropClick}>\r\n        <div className={s.modal}>\r\n            <img src={src} alt={alt}/>\r\n          </div>\r\n        </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}\r\n\r\nModal.propTypes = {\r\n  image: PropTypes.object,\r\n  toggleModal: PropTypes.func,\r\n};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from './Button.module.css';\r\n\r\nexport default function Button({ onClick }) {\r\n  return (\r\n    <div className={s.center}>\r\n      <button type=\"button\" className={s.Button} onClick={onClick}>\r\n        Load more\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\nButton.propTypes = {\r\n  onClick: PropTypes.func.isRequired,\r\n};","import PropTypes from 'prop-types';\r\nimport s from './ImageGalleryItem.module.css';\r\n\r\n\r\nfunction ImageGalleryItem({\r\n  webformatURL,\r\n  largeImageURL,\r\n  tags,\r\n  index,\r\n  imageClickHandler,\r\n}) {\r\n  return (\r\n    <li key={index}\r\n      className={s.item} \r\n      onClick={() => {\r\n        imageClickHandler(largeImageURL, tags);\r\n      }}\r\n    >\r\n     <img className={s.image}  src={webformatURL} alt={tags}/>\r\n    </li>\r\n  );\r\n}\r\n\r\nImageGalleryItem.propTypes = {\r\n  webformatURL: PropTypes.string.isRequired,\r\n  largeImageURL: PropTypes.string.isRequired,\r\n  tags: PropTypes.string.isRequired,\r\n  imageClickHandler: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ImageGalleryItem;","import PropTypes from \"prop-types\";\r\nimport { Component } from 'react';\r\n\r\nimport fetchGallery from '../../API/PixabayFetch';\r\nimport s from './ImageGallery.module.css';\r\nimport Preloader from '../Loader/Loader';\r\nimport Modal from '../Modal/Modal';\r\nimport Button from \"../Button/Button\"\r\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\r\n\r\nimport { toast } from 'react-toastify';\r\n\r\nconst Status = {\r\n  IDLE: 'idle',\r\n  PENDING: 'pending',\r\n  RESOLVED: 'resolved',\r\n  REJECTED: 'rejected',\r\n};\r\n\r\nexport default class ImageGallery extends Component {\r\n  static propTypes = {\r\n    searchQuery: PropTypes.string,\r\n  };\r\n\r\n  state = {\r\n    gallery: [],\r\n    page: 1,\r\n    error: null,\r\n\r\n    showModal: false,\r\n    modalImage: {\r\n      src: \"\",\r\n      alt: \"\",\r\n    },\r\n\r\n    status: Status.IDLE,\r\n  };\r\n\r\n  async componentDidUpdate(prevProps, prevState) {\r\n    const prevSearch = prevProps.searchQuery;\r\n    const nextSearch = this.props.searchQuery;\r\n    //let nextPage = this.state.page + 1;\r\n\r\n    if (prevSearch !== nextSearch) {\r\n \r\n      await this.setState({\r\n        gallery: [],\r\n        page: 1,\r\n        status: Status.PENDING\r\n      });\r\n\r\n      this.updatingGallery(nextSearch);\r\n    }\r\n    if (this.state.gallery !== prevState.gallery) {\r\n      this.scrollToBottom(this.state.page);\r\n    }\r\n  }\r\n\r\n    scrollToBottom = () => {\r\n      //if (this.state.page !== 1)\r\n      window.scrollTo({\r\n        top: document.documentElement.scrollHeight,\r\n        behavior: \"smooth\",\r\n      });\r\n    }\r\n\r\n    handleLoadMore = () => {\r\n      this.updatingGallery(this.props.searchQuery);\r\n      this.setState({ status: Status.PENDING });\r\n    }\r\n\r\n    updatingGallery = (nextSearch, prevState) => {\r\n      const { page } = this.state;\r\n  \r\n      fetchGallery(nextSearch, page)\r\n        .then(response => {\r\n          if (response.hits.length === 0) {\r\n            this.setState({ status: Status.IDLE });\r\n            return toast.error('not found');\r\n          }\r\n          this.setState(\r\n            (prevState) => ({\r\n              gallery: [...prevState.gallery, ...response.hits],\r\n              status: Status.RESOLVED,\r\n              page: prevState.page + 1,\r\n            })\r\n            //this.scrollToBottom\r\n          );\r\n          //this.scrollToBottom();\r\n          //window.scrollTo(0,(page.scrollHeight))\r\n          //window.scrollByPages(1)\r\n      \r\n        })\r\n        .catch(({ message }) =>\r\n          this.setState({ error: message, status: Status.REJECTED }),\r\n        )\r\n      //.finally(() => this.scrollToBottom());\r\n      //this.setState(prevState => ({ page: (prevState.page + 1) }));\r\n  \r\n    }\r\n\r\n    imageClickHandler = (src, alt) => {\r\n      this.toggleModal();\r\n      this.setState({\r\n        modalImage: { src, alt },\r\n      });\r\n    };\r\n\r\n    handlerClickEsc = e => {\r\n      if (e.key === 'Escape' && this.state.modal.show) this.openModal();\r\n    };\r\n\r\n    toggleModal = () => {\r\n      this.setState(({ showModal }) => ({\r\n        showModal: !showModal,\r\n      }));\r\n    };\r\n\r\n    render() {\r\n      const { gallery, status, error, showModal, modalImage } = this.state;\r\n\r\n      if (status === 'idle') {\r\n        return <div></div>;\r\n      }\r\n\r\n      if (status === 'pending') {\r\n        return <Preloader />;\r\n       \r\n      }\r\n\r\n      if (status === 'rejected') {\r\n        return <h1>{error}</h1>\r\n      }\r\n\r\n      if (status === 'resolved') {\r\n        return (\r\n          <div>\r\n            <ul className={s.ImageGallery}>\r\n              {gallery.map(({ webformatURL, largeImageURL, tags }, index) => (\r\n                <ImageGalleryItem key={index}\r\n                  webformatURL={webformatURL}\r\n                  largeImageURL={largeImageURL}\r\n                  tags={tags}\r\n                  imageClickHandler={this.imageClickHandler}\r\n                />\r\n              ))}\r\n            </ul>\r\n\r\n            {showModal && (\r\n              <Modal image={modalImage} toggleModal={this.toggleModal} />\r\n            )}\r\n        \r\n            <Button onClick={this.handleLoadMore} />\r\n          </div>\r\n          \r\n        );\r\n      }\r\n    }\r\n  }\r\n","import React, { Component } from 'react';\nimport Searchbar from '../Searchbar/Searchbar';\nimport ImageGallery from '../ImageGallery/ImageGallery';\nimport s from './App.module.css';\n\nexport default class App extends Component {\n  state = {\n    searchQuery: '',\n  };\n\n  handleChange = searchQuery => {\n    if (searchQuery === this.state.searchQuery || searchQuery === '') return;\n    //this.setState(() => ({ searchQuery }));\n    this.setState({ searchQuery });\n  };\n\n  render() {\n    return (\n      <div className={s.app}>\n        <Searchbar onSubmit={this.handleChange} />\n        <div>\n          <ImageGallery searchQuery={this.state.searchQuery} />\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport '.././src/index.css';\nimport App from '../src/components/App/App';\n//import reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n//reportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2d4si\",\"SearchForm\":\"Searchbar_SearchForm__1_iHc\",\"button\":\"Searchbar_button__pj410\",\"label\":\"Searchbar_label__LN_Px\",\"input\":\"Searchbar_input__1O2e1\"};"],"sourceRoot":""}